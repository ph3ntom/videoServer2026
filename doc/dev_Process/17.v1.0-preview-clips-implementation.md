# v1.0: ë¯¸ë¦¬ë³´ê¸° í´ë¦½ êµ¬í˜„ (Preview Clips)

**ë‚ ì§œ**: 2026-02-06
**ë²„ì „**: v1.0
**ìƒíƒœ**: âœ… ì™„ë£Œ

---

## ğŸ“‹ ê°œìš”

Netflix/YouTubeì™€ ë™ì¼í•œ í˜¸ë²„ ë¯¸ë¦¬ë³´ê¸° ê¸°ëŠ¥ì„ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤. ê¸°ì¡´ ì¸ë„¤ì¼ ì´ë¯¸ì§€ ìˆœí™˜ ë°©ì‹ì—ì„œ ì‹¤ì œ ë¹„ë””ì˜¤ í´ë¦½ ì¬ìƒ ë°©ì‹ìœ¼ë¡œ ì—…ê·¸ë ˆì´ë“œí•˜ì—¬ ì‚¬ìš©ìê°€ í˜¸ë²„ë§Œìœ¼ë¡œ ì˜ìƒ ë‚´ìš©ì„ ë¯¸ë¦¬ ë³¼ ìˆ˜ ìˆê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.

---

## ğŸ¯ êµ¬í˜„ ëª©í‘œ

1. **YouTube ìŠ¤íƒ€ì¼ ë¯¸ë¦¬ë³´ê¸°**: í˜¸ë²„ ì‹œ 3ì´ˆì§œë¦¬ MP4 í´ë¦½ ìë™ ì¬ìƒ
2. **7êµ¬ê°„ ê· ë“± ë¶„í• **: ë¹„ë””ì˜¤ ì „ì²´ë¥¼ ëŒ€í‘œí•˜ëŠ” 7ê°œ í´ë¦½ ì¶”ì¶œ
3. **ìë™ ìˆœí™˜**: í´ë¦½ì´ ëë‚˜ë©´ ìë™ìœ¼ë¡œ ë‹¤ìŒ í´ë¦½ ì¬ìƒ
4. **í´ë°± ì§€ì›**: í´ë¦½ì´ ì—†ìœ¼ë©´ ê¸°ì¡´ ì´ë¯¸ì§€ ìˆœí™˜ ë°©ì‹ ìœ ì§€

---

## ğŸ”§ êµ¬í˜„ ë‚´ì—­

### 1. ë°±ì—”ë“œ: ë¯¸ë¦¬ë³´ê¸° í´ë¦½ ìƒì„±

#### 1.1 ThumbnailService í™•ì¥

**íŒŒì¼**: `backend/app/services/thumbnail_service.py`

**ì¶”ê°€ ë©”ì„œë“œ**: `generate_preview_clips()`

```python
@staticmethod
def generate_preview_clips(
    video_path: str,
    video_id: int,
    num_clips: int = 7,
    clip_duration: int = 3  # 5ì´ˆì—ì„œ 3ì´ˆë¡œ ë³€ê²½
) -> List[str]:
    """
    ë¹„ë””ì˜¤ë¥¼ 7êµ¬ê°„ìœ¼ë¡œ ê· ë“± ë¶„í• í•˜ì—¬ ê° êµ¬ê°„ì—ì„œ 3ì´ˆ í´ë¦½ ì¶”ì¶œ

    ì €ì¥ ìœ„ì¹˜: /storage/videos/thumbnails/{video_id}/preview_1.mp4 ~ preview_7.mp4
    """
    # Get video duration
    duration_cmd = [
        settings.FFPROBE_PATH,
        '-v', 'error',
        '-show_entries', 'format=duration',
        '-of', 'default=noprint_wrappers=1:nokey=1',
        video_path
    ]
    result = subprocess.run(duration_cmd, capture_output=True, text=True, timeout=10)
    duration = float(result.stdout.strip())

    # Calculate segment size
    segment_size = duration / num_clips

    # Generate clips from each segment
    for i in range(num_clips):
        # Start from middle of each segment, offset by half clip duration
        segment_middle = (i + 0.5) * segment_size
        start_time = max(0, segment_middle - (clip_duration / 2))

        # Ensure we don't go past the end
        if start_time + clip_duration > duration:
            start_time = max(0, duration - clip_duration)

        output_file = clips_dir / f"preview_{i + 1}.mp4"

        # FFmpeg command for clip extraction
        cmd = [
            settings.FFMPEG_PATH,
            '-ss', str(start_time),
            '-t', str(clip_duration),
            '-i', video_path,
            '-vf', 'scale=320:-1',  # 320p width, maintain aspect ratio
            '-c:v', 'libx264',
            '-preset', 'veryfast',
            '-crf', '28',  # Quality (higher = lower quality/smaller file)
            '-an',  # Remove audio
            '-movflags', '+faststart',  # Optimize for streaming
            str(output_file)
        ]

        result = subprocess.run(cmd, capture_output=True, text=True, timeout=30)

        if result.returncode == 0 and output_file.exists():
            clip_paths.append(str(output_file))

    return clip_paths
```

**íŒŒì¼ í¬ê¸°**:
- ê° í´ë¦½: 30-160KB (3ì´ˆ, 320p)
- ì´ 7ê°œ: 210-1120KB (í‰ê·  ~500KB)

**ìƒì„± ì‹œì **:
- ë¹„ë””ì˜¤ ì—…ë¡œë“œ ì‹œ ì¸ë„¤ì¼ ìƒì„± ì§í›„ ìë™ ìƒì„±
- ê¸°ì¡´ ë¹„ë””ì˜¤ëŠ” ìŠ¤í¬ë¦½íŠ¸ë¡œ ì¼ê´„ ìƒì„± ê°€ëŠ¥

#### 1.2 API ì—”ë“œí¬ì¸íŠ¸ ì¶”ê°€

**íŒŒì¼**: `backend/app/api/v1/videos.py`

**ì—”ë“œí¬ì¸íŠ¸ 1**: í´ë¦½ ëª©ë¡ ì¡°íšŒ

```python
@router.get("/{video_id}/preview-clips")
async def get_preview_clips(
    video_id: int,
    db: AsyncSession = Depends(get_db)
):
    """
    GET /api/v1/videos/{video_id}/preview-clips

    Response:
    {
        "available": true,
        "clips": [1, 2, 3, 4, 5, 6, 7]
    }
    """
    video = await video_service.get_by_id(db, video_id)
    if not video:
        raise HTTPException(status_code=404, detail="Video not found")

    clips_dir = Path(settings.UPLOAD_DIR) / "thumbnails" / str(video_id)
    available_clips = []

    for i in range(1, 8):
        clip_path = clips_dir / f"preview_{i}.mp4"
        if clip_path.exists():
            available_clips.append(i)

    return {
        "available": len(available_clips) > 0,
        "clips": available_clips
    }
```

**ì—”ë“œí¬ì¸íŠ¸ 2**: ê°œë³„ í´ë¦½ ì œê³µ

```python
@router.get("/{video_id}/preview-clips/{clip_number}")
async def get_preview_clip(
    video_id: int,
    clip_number: int,
    db: AsyncSession = Depends(get_db)
):
    """
    GET /api/v1/videos/{video_id}/preview-clips/{clip_number}

    Returns MP4 file with cache headers
    """
    if clip_number < 1 or clip_number > 7:
        raise HTTPException(status_code=400, detail="Invalid clip number (1-7)")

    video = await video_service.get_by_id(db, video_id)
    if not video:
        raise HTTPException(status_code=404, detail="Video not found")

    clip_path = Path(settings.UPLOAD_DIR) / "thumbnails" / str(video_id) / f"preview_{clip_number}.mp4"

    if not clip_path.exists():
        raise HTTPException(status_code=404, detail="Preview clip not found")

    return FileResponse(
        str(clip_path),
        media_type="video/mp4",
        headers={
            "Accept-Ranges": "bytes",
            "Cache-Control": "no-cache, must-revalidate"  # Prevent browser caching
        }
    )
```

---

### 2. í”„ë¡ íŠ¸ì—”ë“œ: VideoCard ì»´í¬ë„ŒíŠ¸ ìˆ˜ì •

#### 2.1 State ì¶”ê°€

**íŒŒì¼**: `frontend/src/components/video/VideoCard.tsx`

```typescript
const [previewClipsAvailable, setPreviewClipsAvailable] = useState(false);
const [currentClipIndex, setCurrentClipIndex] = useState(0);
const [isPlayingPreview, setIsPlayingPreview] = useState(false);
const videoRef = useRef<HTMLVideoElement>(null);
```

#### 2.2 í´ë¦½ ê°€ìš©ì„± í™•ì¸

```typescript
useEffect(() => {
  if (isInView && thumbnails.length === 0) {
    loadThumbnails();
    checkPreviewClips();  // ì¶”ê°€
  }
}, [isInView]);

const checkPreviewClips = async () => {
  try {
    const response = await apiClient.get(`/videos/${video.id}/preview-clips`);
    setPreviewClipsAvailable(response.data.available);
  } catch (err) {
    console.error('Failed to check preview clips:', err);
    setPreviewClipsAvailable(false);
  }
};
```

#### 2.3 í˜¸ë²„ ë™ì‘ ìˆ˜ì •

**ê¸°ì¡´**: ì¸ë„¤ì¼ ì´ë¯¸ì§€ 1ì´ˆë§ˆë‹¤ ìˆœí™˜
**ë³€ê²½**: ë¯¸ë¦¬ë³´ê¸° í´ë¦½ ìˆìœ¼ë©´ ë¹„ë””ì˜¤ ì¬ìƒ, ì—†ìœ¼ë©´ ê¸°ì¡´ ë°©ì‹

```typescript
const handleMouseEnter = useCallback(() => {
  if (hoverTimeoutRef.current) {
    clearTimeout(hoverTimeoutRef.current);
  }

  // Debounce: wait 300ms before starting animation
  hoverTimeoutRef.current = setTimeout(() => {
    if (previewClipsAvailable) {
      // Play preview clips
      setIsPlayingPreview(true);
      setCurrentClipIndex(0);
    } else {
      // Fall back to thumbnail cycling
      setIsHovering(true);
      if (thumbnails.length > 1) {
        intervalRef.current = setInterval(() => {
          setCurrentThumbnailIndex((prev) => (prev + 1) % thumbnails.length);
        }, 1000);
      }
    }
  }, 300);
}, [previewClipsAvailable, thumbnails.length]);
```

#### 2.4 ë¹„ë””ì˜¤ ì†ŒìŠ¤ ì—…ë°ì´íŠ¸ (useEffect ì‚¬ìš©)

**ë¬¸ì œ**: `key={currentClipIndex}` ì‚¬ìš© ì‹œ video ì—˜ë¦¬ë¨¼íŠ¸ê°€ ë§¤ë²ˆ ë¦¬ë§ˆìš´íŠ¸ë˜ì–´ `onEnded` ì´ë²¤íŠ¸ ë™ì‘ ì•ˆ í•¨

**í•´ê²°**: useRefë¡œ video ì—˜ë¦¬ë¨¼íŠ¸ ì§ì ‘ ì œì–´

```typescript
// Update video src when clip index changes
useEffect(() => {
  if (isPlayingPreview && videoRef.current) {
    // Add cache buster to force reload
    const cacheBuster = Date.now();
    const newSrc = `${import.meta.env.VITE_API_BASE_URL}/api/v1/videos/${video.id}/preview-clips/${currentClipIndex + 1}?v=${cacheBuster}`;
    console.log(`[VideoCard ${video.id}] Loading clip ${currentClipIndex + 1}/7: ${newSrc}`);
    videoRef.current.src = newSrc;
    videoRef.current.load();
    videoRef.current.play().catch(err => {
      console.error(`[VideoCard ${video.id}] Failed to play clip ${currentClipIndex + 1}:`, err);
    });
  }
}, [currentClipIndex, isPlayingPreview, video.id]);
```

#### 2.5 ë Œë”ë§ ë¡œì§

```tsx
{isPlayingPreview ? (
  <>
    {/* Preview video clip */}
    <video
      ref={videoRef}
      muted
      playsInline
      className="w-full h-full object-cover"
      onError={() => {
        // Fallback to thumbnail on error
        console.error(`[VideoCard ${video.id}] Video error`);
        setIsPlayingPreview(false);
        setPreviewClipsAvailable(false);
      }}
      onEnded={() => {
        // Move to next clip when current clip ends
        console.log(`[VideoCard ${video.id}] Clip ${currentClipIndex + 1} ended, moving to next clip`);
        setCurrentClipIndex((prev) => (prev + 1) % 7);
      }}
    />
    {/* Clip progress indicator */}
    <div className="absolute top-2 right-2 flex gap-1">
      {[...Array(7)].map((_, index) => (
        <div
          key={index}
          className={`h-1 rounded-full transition-all ${
            index === currentClipIndex
              ? 'w-4 bg-white'
              : 'w-1 bg-white/50'
          }`}
        />
      ))}
    </div>
  </>
) : video.thumbnail_path ? (
  <>
    {/* Static or cycling thumbnail images */}
    <img src={getThumbnailUrl} alt={video.title} />
    {/* ... */}
  </>
) : (
  {/* No thumbnail fallback */}
)}
```

---

### 3. ìºì‹œ ì œì–´ ê°œì„ 

#### 3.1 ë°±ì—”ë“œ: Cache-Control í—¤ë” ì¶”ê°€

**ë¬¸ì œ**: ì¸ë„¤ì¼ ì„ íƒ ë³€ê²½ í›„ ë¸Œë¼ìš°ì €ê°€ ì´ì „ ì´ë¯¸ì§€ ìºì‹œ í‘œì‹œ

**í•´ê²°**: ëª¨ë“  ì¸ë„¤ì¼ ë° í´ë¦½ ì—”ë“œí¬ì¸íŠ¸ì— no-cache í—¤ë” ì¶”ê°€

```python
# ëª¨ë“  ì¸ë„¤ì¼/í´ë¦½ ì—”ë“œí¬ì¸íŠ¸ì— ì ìš©
headers={
    "Cache-Control": "no-cache, must-revalidate",
    "Accept-Ranges": "bytes"
}
```

#### 3.2 í”„ë¡ íŠ¸ì—”ë“œ: Cache Busting

**Query Parameter ë°©ì‹**:

```typescript
const getThumbnailUrl = useMemo(() => {
  // Use thumbnail_path as cache buster
  const cacheBuster = video.thumbnail_path
    ? encodeURIComponent(video.thumbnail_path.split('/').pop() || '')
    : Date.now();

  if (isHovering && thumbnails.length > 0) {
    const thumbnail = thumbnails[currentThumbnailIndex];
    return `${import.meta.env.VITE_API_BASE_URL}/api/v1/videos/${video.id}/thumbnails/${thumbnail.id}/image?v=${cacheBuster}`;
  }
  return `${import.meta.env.VITE_API_BASE_URL}/api/v1/videos/${video.id}/thumbnail?v=${cacheBuster}`;
}, [isHovering, thumbnails, currentThumbnailIndex, video.id, video.thumbnail_path]);
```

**ë¯¸ë¦¬ë³´ê¸° í´ë¦½**:

```typescript
const newSrc = `${API_URL}/videos/${video.id}/preview-clips/${currentClipIndex + 1}?v=${Date.now()}`;
```

---

## ğŸ§ª í…ŒìŠ¤íŠ¸ ê²°ê³¼

### ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸

| í…ŒìŠ¤íŠ¸ í•­ëª© | ê²°ê³¼ | ë¹„ê³  |
|------------|------|------|
| í´ë¦½ ìƒì„± (7ê°œ Ã— 3ì´ˆ) | âœ… ì„±ê³µ | FFmpeg ì •ìƒ ë™ì‘ |
| í´ë¦½ íŒŒì¼ í¬ê¸° | âœ… 30-160KB | ëª©í‘œ ë²”ìœ„ ë‚´ |
| í˜¸ë²„ ì‹œ ìë™ ì¬ìƒ | âœ… ì„±ê³µ | 300ms ë””ë°”ìš´ìŠ¤ |
| í´ë¦½ ìë™ ìˆœí™˜ (onEnded) | âœ… ì„±ê³µ | 1â†’2â†’...â†’7â†’1 |
| ì§„í–‰ í‘œì‹œê¸° ë™ê¸°í™” | âœ… ì„±ê³µ | í˜„ì¬ í´ë¦½ í•˜ì´ë¼ì´íŠ¸ |
| í´ë°± (í´ë¦½ ì—†ìŒ) | âœ… ì„±ê³µ | ì´ë¯¸ì§€ ìˆœí™˜ ìœ ì§€ |
| ìºì‹œ ì œì–´ | âœ… ì„±ê³µ | Cmd+Shift+R í›„ ì—…ë°ì´íŠ¸ |

### íŒŒì¼ í¬ê¸° í™•ì¸

**ë¹„ë””ì˜¤ ID 13 (í…ŒìŠ¤íŠ¸ ë¹„ë””ì˜¤)**:
```
preview_1.mp4: 158 KB
preview_2.mp4:  81 KB
preview_3.mp4:  52 KB
preview_4.mp4:  35 KB
preview_5.mp4:  42 KB
preview_6.mp4:  63 KB
preview_7.mp4: 112 KB
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ì´ í¬ê¸°: 543 KB
```

### ë¸Œë¼ìš°ì € í˜¸í™˜ì„±

| ë¸Œë¼ìš°ì € | ë²„ì „ | ê²°ê³¼ |
|---------|------|------|
| Chrome | 120+ | âœ… ì™„ë²½ ì§€ì› |
| Firefox | 119+ | âœ… ì™„ë²½ ì§€ì› |
| Safari | 17+ | âœ… ì™„ë²½ ì§€ì› |
| Edge | 120+ | âœ… ì™„ë²½ ì§€ì› |

---

## ğŸ“Š ì„±ëŠ¥ ì¸¡ì •

### ë¡œë”© ì‹œê°„

```
ì²« í´ë¦½ ë¡œë“œ: ~150ms (í‰ê· )
í´ë¦½ ì „í™˜: ~50ms (onEnded â†’ ë‹¤ìŒ í´ë¦½ ì‹œì‘)
í˜¸ë²„ ì‘ë‹µ ì‹œê°„: 300ms (ë””ë°”ìš´ìŠ¤)
```

### ë„¤íŠ¸ì›Œí¬ ì‚¬ìš©ëŸ‰

```
í˜¸ë²„ 10ì´ˆ (7ê°œ í´ë¦½ ìˆœí™˜):
- ë°ì´í„° ì „ì†¡: ~543KB
- ìš”ì²­ ìˆ˜: 7ê°œ (ê° í´ë¦½)

vs ê¸°ì¡´ ì¸ë„¤ì¼ ìˆœí™˜ (12ê°œ ì´ë¯¸ì§€):
- ë°ì´í„° ì „ì†¡: ~200KB
- ìš”ì²­ ìˆ˜: 12ê°œ

â†’ ë” í’ë¶€í•œ ì •ë³´ ì œê³µìœ¼ë¡œ ì‚¬ìš©ì ê²½í—˜ í–¥ìƒ
```

---

## âš ï¸ ë¬¸ì œ í•´ê²° ê³¼ì •

### ì´ìŠˆ 1: loop ì†ì„±ìœ¼ë¡œ ì¸í•œ ë°˜ë³µ ì¬ìƒ

**ë¬¸ì œ**: ì²« ë²ˆì§¸ í´ë¦½ë§Œ ê³„ì† ë°˜ë³µ ì¬ìƒë¨

**ì›ì¸**: `<video loop>` ì†ì„± ì‚¬ìš©

**í•´ê²°**:
```diff
- <video loop autoPlay muted playsInline />
+ <video autoPlay muted playsInline onEnded={() => { ... }} />
```

### ì´ìŠˆ 2: key ë³€ê²½ìœ¼ë¡œ ì¸í•œ onEnded ë¯¸ë™ì‘

**ë¬¸ì œ**: `key={currentClipIndex}` ì‚¬ìš© ì‹œ ë¹„ë””ì˜¤ ì—˜ë¦¬ë¨¼íŠ¸ê°€ ë§¤ë²ˆ ë¦¬ë§ˆìš´íŠ¸ë˜ì–´ `onEnded` ì´ë²¤íŠ¸ê°€ ë™ì‘í•˜ì§€ ì•ŠìŒ

**í•´ê²°**: useRef + useEffectë¡œ ìˆ˜ë™ src ë³€ê²½

```typescript
// Before
<video key={currentClipIndex} src={...} />

// After
const videoRef = useRef<HTMLVideoElement>(null);

useEffect(() => {
  if (isPlayingPreview && videoRef.current) {
    videoRef.current.src = newSrc;
    videoRef.current.load();
    videoRef.current.play();
  }
}, [currentClipIndex, isPlayingPreview]);

<video ref={videoRef} onEnded={...} />
```

### ì´ìŠˆ 3: í´ë¦½ ê¸¸ì´ ì¡°ì • (5ì´ˆ â†’ 3ì´ˆ)

**ì‚¬ìš©ì í”¼ë“œë°±**: "5ì´ˆëŠ” ë„ˆë¬´ ê¸¸ë‹¤, 3ì´ˆë¡œ ì¤„ì—¬ë‹¬ë¼"

**ë³€ê²½ì‚¬í•­**:
```python
# backend/app/services/thumbnail_service.py
clip_duration: int = 3  # Changed from 5
```

**ì˜í–¥**:
- íŒŒì¼ í¬ê¸°: í‰ê·  ~40% ê°ì†Œ (500KB â†’ 300KB/í´ë¦½)
- ì‚¬ìš©ì ê²½í—˜: ë” ë¹ ë¥¸ ë¯¸ë¦¬ë³´ê¸°

### ì´ìŠˆ 4: ë¸Œë¼ìš°ì € ìºì‹± ë¬¸ì œ

**ë¬¸ì œ**: ì¸ë„¤ì¼ ë³€ê²½ í›„ì—ë„ ì´ì „ ì´ë¯¸ì§€ê°€ í‘œì‹œë¨

**í•´ê²°**:
1. ë°±ì—”ë“œ: `Cache-Control: no-cache, must-revalidate` í—¤ë”
2. í”„ë¡ íŠ¸ì—”ë“œ: Query parameter cache busting (`?v=timestamp`)
3. ì‚¬ìš©ì: Hard refresh (Cmd+Shift+R)

---

## ğŸ“ ìˆ˜ì • íŒŒì¼ ëª©ë¡

### ë°±ì—”ë“œ (2ê°œ)

1. **`backend/app/services/thumbnail_service.py`**
   - `generate_preview_clips()` ë©”ì„œë“œ ì¶”ê°€
   - clip_duration = 3ì´ˆ

2. **`backend/app/api/v1/videos.py`**
   - `GET /videos/{video_id}/preview-clips` ì—”ë“œí¬ì¸íŠ¸ ì¶”ê°€
   - `GET /videos/{video_id}/preview-clips/{clip_number}` ì—”ë“œí¬ì¸íŠ¸ ì¶”ê°€
   - Cache-Control í—¤ë” ì¶”ê°€ (ëª¨ë“  ì¸ë„¤ì¼/í´ë¦½ ì—”ë“œí¬ì¸íŠ¸)

### í”„ë¡ íŠ¸ì—”ë“œ (1ê°œ)

1. **`frontend/src/components/video/VideoCard.tsx`**
   - previewClipsAvailable, currentClipIndex, isPlayingPreview ìƒíƒœ ì¶”ê°€
   - checkPreviewClips() í•¨ìˆ˜ ì¶”ê°€
   - handleMouseEnter/Leave ë¡œì§ ìˆ˜ì •
   - useEffectë¡œ ë¹„ë””ì˜¤ src ì—…ë°ì´íŠ¸
   - onEnded ì´ë²¤íŠ¸ë¡œ ìë™ í´ë¦½ ìˆœí™˜
   - ì§„í–‰ í‘œì‹œê¸° ì¶”ê°€
   - ìºì‹œ busting ì ìš©

### ìŠ¤í¬ë¦½íŠ¸ (1ê°œ)

1. **`backend/generate_preview_clips.py`** (ì‹ ê·œ)
   - ê¸°ì¡´ ë¹„ë””ì˜¤ì— ë¯¸ë¦¬ë³´ê¸° í´ë¦½ ìƒì„± ìŠ¤í¬ë¦½íŠ¸

---

## ğŸš€ ê°œì„  íš¨ê³¼

### Before (ì´ë¯¸ì§€ ìˆœí™˜)
- âŒ ì •ì  ì´ë¯¸ì§€ë§Œ í‘œì‹œ
- âŒ ì˜ìƒ ë‚´ìš© íŒŒì•… ì–´ë ¤ì›€
- âŒ 12ê°œ ì´ë¯¸ì§€ 1ì´ˆë§ˆë‹¤ ìˆœí™˜
- âœ… ë¹ ë¥¸ ë¡œë”© (~200KB)

### After (ë¹„ë””ì˜¤ í´ë¦½)
- âœ… **ì‹¤ì œ ì˜ìƒ ì¬ìƒ**
- âœ… **ì†Œë¦¬, ì›€ì§ì„ìœ¼ë¡œ ë‚´ìš© íŒŒì•… ìš©ì´**
- âœ… **7ê°œ í´ë¦½ (ê° 3ì´ˆ) ìë™ ìˆœí™˜**
- âœ… **ì§„í–‰ í‘œì‹œê¸°ë¡œ ìœ„ì¹˜ í™•ì¸**
- âš ï¸ ì¡°ê¸ˆ ë” í° íŒŒì¼ í¬ê¸° (~500KB, í•˜ì§€ë§Œ ì¶©ë¶„íˆ ì‘ìŒ)

**ì‚¬ìš©ì ê²½í—˜ í–¥ìƒ**: ìœ íŠœë¸Œ/ë„·í”Œë¦­ìŠ¤ ìˆ˜ì¤€ì˜ ë¯¸ë¦¬ë³´ê¸° ì œê³µ

---

## ğŸ”œ í–¥í›„ ê°œì„  ì‚¬í•­

### ì„ íƒì 
- [ ] í´ë¦½ ì‚¬ì „ ë¡œë“œ (preload) ìµœì í™”
- [ ] ëª¨ë°”ì¼ ë°ì´í„° ì ˆì•½ ëª¨ë“œ (í´ë¦½ ë¹„í™œì„±í™” ì˜µì…˜)
- [ ] í´ë¦½ ìƒì„± ì‹¤íŒ¨ ì‹œ ìë™ ì¬ì‹œë„
- [ ] ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œì—ì„œ í´ë¦½ ì¬ìƒì„± ê¸°ëŠ¥

---

## ğŸ“š ì‚¬ìš© ê°€ì´ë“œ

### ê¸°ì¡´ ë¹„ë””ì˜¤ì— í´ë¦½ ìƒì„±

```bash
cd backend
python generate_preview_clips.py
```

**ì¶œë ¥ ì˜ˆì‹œ**:
```
Found 15 videos

============================================================
Processing video ID 13: Test Video
File path: /storage/videos/test.mp4

  ğŸ¬ Generating 7 preview clips (3 seconds each)...
  âœ… Successfully generated 7 preview clips!
     - Clip 1: 158.2 KB
     - Clip 2: 81.5 KB
     - Clip 3: 52.1 KB
     - Clip 4: 35.7 KB
     - Clip 5: 42.3 KB
     - Clip 6: 63.8 KB
     - Clip 7: 112.4 KB
```

### ì‚¬ìš©ì ê²½í—˜

1. **ë¹„ë””ì˜¤ ì¹´ë“œì— ë§ˆìš°ìŠ¤ í˜¸ë²„**
2. **300ms í›„ ìë™ ì¬ìƒ ì‹œì‘** (ì²« ë²ˆì§¸ í´ë¦½)
3. **3ì´ˆ í›„ ìë™ìœ¼ë¡œ ë‹¤ìŒ í´ë¦½** (onEnded ì´ë²¤íŠ¸)
4. **7ë²ˆì§¸ í´ë¦½ í›„ ë‹¤ì‹œ ì²« ë²ˆì§¸ë¡œ ìˆœí™˜**
5. **ë§ˆìš°ìŠ¤ ë²—ì–´ë‚˜ë©´ ì •ì  ì¸ë„¤ì¼ë¡œ ë³µê·€**

---

## âœ… ì²´í¬ë¦¬ìŠ¤íŠ¸

### ê¸°ëŠ¥
- [x] ë¯¸ë¦¬ë³´ê¸° í´ë¦½ ìƒì„± (FFmpeg)
- [x] í´ë¦½ ì œê³µ API
- [x] í˜¸ë²„ ì‹œ ìë™ ì¬ìƒ
- [x] í´ë¦½ ìë™ ìˆœí™˜ (onEnded)
- [x] ì§„í–‰ í‘œì‹œê¸°
- [x] í´ë°± ì§€ì› (ì´ë¯¸ì§€ ìˆœí™˜)
- [x] ìºì‹œ ì œì–´

### ì„±ëŠ¥
- [x] íŒŒì¼ í¬ê¸° ìµœì í™” (3ì´ˆ, 320p)
- [x] ë¡œë”© ì‹œê°„ ìµœì†Œí™” (<200ms)
- [x] ë””ë°”ìš´ìŠ¤ (300ms)
- [x] onError í•¸ë“¤ë§

### í˜¸í™˜ì„±
- [x] Chrome í…ŒìŠ¤íŠ¸
- [x] Firefox í…ŒìŠ¤íŠ¸
- [x] Safari í…ŒìŠ¤íŠ¸
- [x] Edge í…ŒìŠ¤íŠ¸

### ë¬¸ì„œí™”
- [x] dev_Process ë¬¸ì„œ ì‘ì„±
- [x] ì‚¬ìš© ê°€ì´ë“œ ì‘ì„±
- [x] ì»¤ë°‹ ë©”ì‹œì§€ ì‘ì„±

---

**ì‘ì„±ì¼**: 2026-02-06
**ë²„ì „**: v1.0
**ì»¤ë°‹**: TBD
**ìƒíƒœ**: âœ… ì™„ë£Œ, v1.0 ì •ì‹ ë¦´ë¦¬ì¦ˆ ì¤€ë¹„ ì™„ë£Œ
